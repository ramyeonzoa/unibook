<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자주 묻는 질문 - Unibook</title>
    <meta name="description" content="Unibook 사용법과 자주 묻는 질문들을 확인해보세요.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <div th:replace="~{fragments/header :: styles}"></div>
    <style>
        .faq-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
        }
        .faq-category {
            border-left: 4px solid #667eea;
            background: rgba(102, 126, 234, 0.05);
            margin-bottom: 30px;
        }
        .accordion-button:not(.collapsed) {
            background-color: rgba(102, 126, 234, 0.1);
            border-color: rgba(102, 126, 234, 0.2);
        }
        .search-box {
            max-width: 500px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <!-- 공통 헤더 포함 -->
    <nav th:replace="~{fragments/header :: header}"></nav>

    <!-- 공통 메시지 포함 -->
    <div th:replace="~{fragments/header :: messages}"></div>

    <main id="main-content">
        <!-- Header Section -->
        <section class="faq-header">
            <div class="container text-center">
                <h1 class="display-5 fw-bold mb-4">
                    <i class="bi bi-question-circle me-3"></i>자주 묻는 질문
                </h1>
                <p class="lead">Unibook 사용법과 궁금한 점들을 해결해드려요</p>
                
                <!-- Search Box -->
                <div class="search-box mt-4">
                    <div class="input-group">
                        <input type="text" class="form-control form-control-lg" 
                               placeholder="궁금한 내용을 검색해보세요" id="faqSearch">
                        <button class="btn btn-light" type="button">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-5">
            <div class="container">
                <!-- 회원가입 & 로그인 -->
                <div class="faq-category p-4 rounded">
                    <h3 class="mb-3"><i class="bi bi-person-plus me-2"></i>회원가입 & 로그인</h3>
                    
                    <div class="accordion" id="accountAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#account1">
                                    회원가입은 어떻게 하나요?
                                </button>
                            </h2>
                            <div id="account1" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    <p>1. 우상단의 "회원가입" 버튼을 클릭해주세요.</p>
                                    <p>2. 이름, 이메일, 비밀번호를 입력해주세요.</p>
                                    <p>3. 학교 이메일(.ac.kr)을 사용하시면 소속 대학이 자동으로 인증됩니다.</p>
                                    <p>4. 이메일로 발송된 인증 링크를 클릭하면 가입이 완료됩니다.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#account2">
                                    이메일 인증이 안 돼요
                                </button>
                            </h2>
                            <div id="account2" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                                <div class="accordion-body">
                                    <p>1. 스팸 메일함을 확인해주세요.</p>
                                    <p>2. 상단의 노란색 알림 바에서 "인증 메일 재발송" 버튼을 클릭해주세요.</p>
                                    <p>3. 그래도 받지 못하셨다면 <a href="mailto:unibooknotify@gmail.com">unibooknotify@gmail.com</a>으로 문의해주세요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 교재 거래 -->
                <div class="faq-category p-4 rounded">
                    <h3 class="mb-3"><i class="bi bi-book me-2"></i>교재 거래</h3>
                    
                    <div class="accordion" id="tradeAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trade1">
                                    교재는 어떻게 등록하나요?
                                </button>
                            </h2>
                            <div id="trade1" class="accordion-collapse collapse" data-bs-parent="#tradeAccordion">
                                <div class="accordion-body">
                                    <p>1. 로그인 후 "판매글 작성" 버튼을 클릭해주세요.</p>
                                    <p>2. 상품 유형(전공교재, 자격증 교재, 필기노트 등)을 선택해주세요.</p>
                                    <p>3. 교재인 경우 "책 검색하기"로 정확한 도서 정보를 입력할 수 있어요.</p>
                                    <p>4. 과목과 교수님을 선택하면 다른 학생들이 찾기 쉬워져요.</p>
                                    <p>5. 사진을 최대 5장까지 업로드할 수 있어요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trade2">
                                    거래 상태는 어떻게 관리하나요?
                                </button>
                            </h2>
                            <div id="trade2" class="accordion-collapse collapse" data-bs-parent="#tradeAccordion">
                                <div class="accordion-body">
                                    <p><strong>판매중:</strong> 판매 가능한 상태</p>
                                    <p><strong>예약중:</strong> 구매자와 거래가 진행 중인 상태</p>
                                    <p><strong>거래완료:</strong> 거래가 완료된 상태</p>
                                    <p>게시글 상세 페이지에서 "상태 변경" 버튼으로 언제든지 변경할 수 있어요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trade3">
                                    안전한 거래 방법이 있나요?
                                </button>
                            </h2>
                            <div id="trade3" class="accordion-collapse collapse" data-bs-parent="#tradeAccordion">
                                <div class="accordion-body">
                                    <p>1. <strong>직거래:</strong> 학교 내 공개된 장소에서 만나세요.</p>
                                    <p>2. <strong>택배:</strong> 입금 확인 후 배송하고, 운송장 번호를 공유하세요.</p>
                                    <p>3. <strong>채팅 활용:</strong> 모든 대화 내역이 기록되니 채팅으로 소통하세요.</p>
                                    <p>4. <strong>신고 기능:</strong> 문제가 있을 경우 신고 기능을 활용하세요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 검색 & 기능 -->
                <div class="faq-category p-4 rounded">
                    <h3 class="mb-3"><i class="bi bi-search me-2"></i>검색 & 기능</h3>
                    
                    <div class="accordion" id="featureAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature1">
                                    원하는 교재를 빠르게 찾는 방법은?
                                </button>
                            </h2>
                            <div id="feature1" class="accordion-collapse collapse" data-bs-parent="#featureAccordion">
                                <div class="accordion-body">
                                    <p>1. <strong>검색창 활용:</strong> 교재명, 교수명, 과목명으로 검색하세요.</p>
                                    <p>2. <strong>필터 기능:</strong> 가격 범위, 상품 유형, 거래 상태로 필터링하세요.</p>
                                    <p>3. <strong>학교 필터:</strong> 같은 학교 게시글만 보고 싶다면 학교 필터를 사용하세요.</p>
                                    <p>4. <strong>정렬 기능:</strong> 최신순, 가격순, 조회수순으로 정렬할 수 있어요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature2">
                                    찜 기능은 어떻게 사용하나요?
                                </button>
                            </h2>
                            <div id="feature2" class="accordion-collapse collapse" data-bs-parent="#featureAccordion">
                                <div class="accordion-body">
                                    <p>1. 게시글 상세 페이지에서 하트 아이콘을 클릭하면 찜할 수 있어요.</p>
                                    <p>2. 찜한 게시글은 "찜 목록"에서 모아볼 수 있어요.</p>
                                    <p>3. 찜한 게시글의 가격이 변경되거나 상태가 바뀌면 실시간 알림을 받아요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature3">
                                    키워드 알림은 무엇인가요?
                                </button>
                            </h2>
                            <div id="feature3" class="accordion-collapse collapse" data-bs-parent="#featureAccordion">
                                <div class="accordion-body">
                                    <p>관심 있는 키워드(예: "자료구조", "경영학원론")를 등록하면, 해당 키워드가 포함된 게시글이 올라올 때 실시간으로 알림을 받을 수 있는 기능이에요.</p>
                                    <p>마이페이지에서 키워드를 관리할 수 있어요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 채팅 -->
                <div class="faq-category p-4 rounded">
                    <h3 class="mb-3"><i class="bi bi-chat-dots me-2"></i>채팅</h3>
                    
                    <div class="accordion" id="chatAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#chat1">
                                    채팅은 어떻게 시작하나요?
                                </button>
                            </h2>
                            <div id="chat1" class="accordion-collapse collapse" data-bs-parent="#chatAccordion">
                                <div class="accordion-body">
                                    <p>게시글 상세 페이지에서 "채팅하기" 버튼을 클릭하면 판매자와 채팅을 시작할 수 있어요.</p>
                                    <p>본인이 작성한 게시글에는 채팅하기 버튼이 표시되지 않아요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#chat2">
                                    이미지는 어떻게 보내나요?
                                </button>
                            </h2>
                            <div id="chat2" class="accordion-collapse collapse" data-bs-parent="#chatAccordion">
                                <div class="accordion-body">
                                    <p>채팅창에서 클립 아이콘(📎)을 클릭하거나, 이미지 파일을 드래그해서 놓으면 이미지를 전송할 수 있어요.</p>
                                    <p>JPG, PNG, GIF 형식을 지원해요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 기타 -->
                <div class="faq-category p-4 rounded">
                    <h3 class="mb-3"><i class="bi bi-gear me-2"></i>기타</h3>
                    
                    <div class="accordion" id="etcAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#etc1">
                                    다크 모드는 어떻게 설정하나요?
                                </button>
                            </h2>
                            <div id="etc1" class="accordion-collapse collapse" data-bs-parent="#etcAccordion">
                                <div class="accordion-body">
                                    <p>우상단의 태양/달 아이콘을 클릭하면 라이트 모드와 다크 모드를 전환할 수 있어요.</p>
                                    <p>설정은 자동으로 저장되어 다음에 접속할 때도 유지돼요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#etc2">
                                    문제 있는 게시글이나 사용자를 신고하고 싶어요
                                </button>
                            </h2>
                            <div id="etc2" class="accordion-collapse collapse" data-bs-parent="#etcAccordion">
                                <div class="accordion-body">
                                    <p>게시글 상세 페이지 하단의 "신고하기" 버튼을 클릭해주세요.</p>
                                    <p>신고 사유를 선택하고 상세 내용을 작성해주시면, 관리자가 검토 후 조치를 취해드려요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact -->
                <div class="text-center mt-5 p-4 bg-light rounded">
                    <h4>더 궁금한 점이 있으신가요?</h4>
                    <p class="text-muted mb-3">언제든지 문의해주세요. 빠르게 도움을 드릴게요!</p>
                    <a href="mailto:unibooknotify@gmail.com" class="btn btn-primary">
                        <i class="bi bi-envelope me-2"></i>문의하기
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- 공통 Footer 포함 -->
    <footer th:replace="~{fragments/header :: footer}"></footer>

    <!-- Scripts -->
    <div th:replace="~{fragments/header :: scripts}"></div>
    
    <!-- FAQ Search Script -->
    <script>
        document.getElementById('faqSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const accordionItems = document.querySelectorAll('.accordion-item');
            
            accordionItems.forEach(item => {
                const button = item.querySelector('.accordion-button');
                const body = item.querySelector('.accordion-body');
                const text = (button.textContent + body.textContent).toLowerCase();
                
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>